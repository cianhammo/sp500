2025-09-24 11:09:30,157 - sec_monitor - INFO - Starting SEC filing monitor 
2025-09-24 11:09:30,157 - sec_monitor - INFO - Loading S&P 500 data...
2025-09-24 11:09:30,157 - sec_monitor - INFO - Starting S&P 500 data initialization
2025-09-24 11:09:30,158 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-09-24 11:09:30,158 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-09-24 11:09:30,158 - sec_monitor - INFO - Initializing components...
2025-09-24 11:09:30,158 - sec_monitor - INFO - Initializing components
2025-09-24 11:09:30,158 - sec_monitor - INFO - SEC fetcher initialized
2025-09-24 11:09:30,158 - sec_monitor - INFO - Filing analyzer initialized
2025-09-24 11:09:30,159 - sec_monitor - INFO - Alpaca clients initialized
2025-09-24 11:09:30,159 - sec_monitor - INFO - All components initialized successfully
2025-09-24 11:09:30,160 - sec_monitor - INFO - Found old JSON file, archiving
2025-09-24 11:09:30,160 - sec_monitor - INFO - Starting new filing collection for today
2025-09-24 11:09:30,160 - sec_monitor - INFO - Fetching SEC filings...
2025-09-24 11:28:37,968 - sec_monitor - INFO - No more entries found
2025-09-24 11:28:37,968 - sec_monitor - INFO - Completed fetching. Found 62 total filings
2025-09-24 11:28:37,968 - sec_monitor - INFO - Found 4 new interesting filings
2025-09-24 11:28:37,968 - sec_monitor - INFO - Found 4 new filings to process
2025-09-24 11:28:37,968 - sec_monitor - INFO - Processing filing 1/4: JCI
2025-09-24 11:29:08,679 - sec_monitor - INFO - ==================================================
2025-09-24 11:29:08,680 - sec_monitor - INFO - Processing first chunk
2025-09-24 11:29:08,680 - sec_monitor - INFO - Timestamp: 2025-09-24 11:29:08
2025-09-24 11:29:08,872 - sec_monitor - INFO - token percentage = 4%
2025-09-24 11:29:08,872 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 11:29:08,872 - sec_monitor - INFO - Timestamp: 2025-09-24 11:29:08
2025-09-24 11:29:13,899 - sec_monitor - INFO - API call successful
2025-09-24 11:29:14,901 - sec_monitor - INFO - Processing filing 2/4: NWS
2025-09-24 11:29:45,564 - sec_monitor - INFO - ==================================================
2025-09-24 11:29:45,564 - sec_monitor - INFO - Processing first chunk
2025-09-24 11:29:45,564 - sec_monitor - INFO - Timestamp: 2025-09-24 11:29:45
2025-09-24 11:29:45,776 - sec_monitor - INFO - token percentage = 6%
2025-09-24 11:29:45,776 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 11:29:45,776 - sec_monitor - INFO - Timestamp: 2025-09-24 11:29:45
2025-09-24 11:29:54,400 - sec_monitor - INFO - API call successful
2025-09-24 11:29:55,401 - sec_monitor - INFO - Processing filing 3/4: RCL
2025-09-24 11:30:26,129 - sec_monitor - INFO - ==================================================
2025-09-24 11:30:26,129 - sec_monitor - INFO - Processing first chunk
2025-09-24 11:30:26,129 - sec_monitor - INFO - Timestamp: 2025-09-24 11:30:26
2025-09-24 11:30:26,426 - sec_monitor - INFO - token percentage = 8%
2025-09-24 11:30:26,426 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 11:30:26,426 - sec_monitor - INFO - Timestamp: 2025-09-24 11:30:26
2025-09-24 11:30:30,785 - sec_monitor - INFO - API call successful
2025-09-24 11:30:31,786 - sec_monitor - INFO - Processing filing 4/4: DELL
2025-09-24 11:31:02,529 - sec_monitor - INFO - ==================================================
2025-09-24 11:31:02,529 - sec_monitor - INFO - Processing first chunk
2025-09-24 11:31:02,529 - sec_monitor - INFO - Timestamp: 2025-09-24 11:31:02
2025-09-24 11:31:02,782 - sec_monitor - INFO - token percentage = 8%
2025-09-24 11:31:02,782 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 11:31:02,782 - sec_monitor - INFO - Timestamp: 2025-09-24 11:31:02
2025-09-24 11:31:11,010 - sec_monitor - INFO - API call successful
2025-09-24 11:31:12,012 - sec_monitor - INFO - Fetching supplementary data...
2025-09-24 11:31:12,278 - sec_monitor - INFO - filing_tickers type: <class 'list'>
2025-09-24 11:31:12,279 - sec_monitor - INFO - filing_data type: <class 'list'>
2025-09-24 11:31:12,279 - sec_monitor - INFO - Market open: False
2025-09-24 11:31:12,279 - sec_monitor - INFO - Number of filing times mapped: 4
2025-09-24 11:31:12,417 - sec_monitor - INFO - Last trading day: 2025-09-24
2025-09-24 11:31:12,417 - sec_monitor - INFO - Processing ticker: JCI
2025-09-24 11:31:12,961 - sec_monitor - INFO - Number of bars for JCI: 3
2025-09-24 11:31:12,961 - sec_monitor - INFO - Last bar close for JCI: 108.24
2025-09-24 11:31:12,961 - sec_monitor - INFO - Outside market hours price for JCI: 108.24
2025-09-24 11:31:12,961 - sec_monitor - INFO - Processing ticker: NWS
2025-09-24 11:31:13,089 - sec_monitor - INFO - Number of bars for NWS: 4
2025-09-24 11:31:13,090 - sec_monitor - INFO - Last bar close for NWS: 33.735
2025-09-24 11:31:13,090 - sec_monitor - INFO - Outside market hours price for NWS: 33.735
2025-09-24 11:31:13,090 - sec_monitor - INFO - Processing ticker: RCL
2025-09-24 11:31:13,175 - sec_monitor - INFO - Number of bars for RCL: 4
2025-09-24 11:31:13,175 - sec_monitor - INFO - Last bar close for RCL: 330.54
2025-09-24 11:31:13,175 - sec_monitor - INFO - Outside market hours price for RCL: 330.54
2025-09-24 11:31:13,175 - sec_monitor - INFO - Processing ticker: DELL
2025-09-24 11:31:13,254 - sec_monitor - INFO - Number of bars for DELL: 4
2025-09-24 11:31:13,255 - sec_monitor - INFO - Last bar close for DELL: 134.32
2025-09-24 11:31:13,255 - sec_monitor - INFO - Outside market hours price for DELL: 134.32
2025-09-24 11:31:14,894 - sec_monitor - INFO - Generating final output...
2025-09-24 11:31:14,894 - sec_monitor - INFO - Successfully saved/merged output to output/sec_filings.json
2025-09-24 11:31:14,894 - sec_monitor - INFO - Processing complete. Stats: {'input_words': 60277, 'output_words': 328, 'filings_processed': 4}
2025-09-24 12:40:47,549 - sec_monitor - INFO - Starting SEC filing monitor 
2025-09-24 12:40:47,550 - sec_monitor - INFO - Loading S&P 500 data...
2025-09-24 12:40:47,550 - sec_monitor - INFO - Starting S&P 500 data initialization
2025-09-24 12:40:47,550 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-09-24 12:40:47,550 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-09-24 12:40:47,550 - sec_monitor - INFO - Initializing components...
2025-09-24 12:40:47,550 - sec_monitor - INFO - Initializing components
2025-09-24 12:40:47,550 - sec_monitor - INFO - SEC fetcher initialized
2025-09-24 12:40:47,551 - sec_monitor - INFO - Filing analyzer initialized
2025-09-24 12:40:47,551 - sec_monitor - INFO - Alpaca clients initialized
2025-09-24 12:40:47,551 - sec_monitor - INFO - All components initialized successfully
2025-09-24 12:40:47,552 - sec_monitor - INFO - Found JSON file from today
2025-09-24 12:40:47,552 - sec_monitor - INFO - Found 4 previously processed accessions and 4 filing URLs
2025-09-24 12:40:47,552 - sec_monitor - INFO - Found 4 accession numbers and 4 URLs from previously processed filings
2025-09-24 12:40:47,552 - sec_monitor - INFO - Fetching SEC filings...
2025-09-24 12:55:49,412 - sec_monitor - INFO - Reached old filing, stopping. Found 35 total filings
2025-09-24 12:55:49,413 - sec_monitor - INFO - Found 2 new interesting filings
2025-09-24 12:55:49,413 - sec_monitor - INFO - Found 2 new filings to process
2025-09-24 12:55:49,413 - sec_monitor - INFO - Processing filing 1/2: CTAS
2025-09-24 12:56:31,582 - sec_monitor - INFO - ==================================================
2025-09-24 12:56:31,583 - sec_monitor - INFO - Processing first chunk
2025-09-24 12:56:31,583 - sec_monitor - INFO - Timestamp: 2025-09-24 12:56:31
2025-09-24 12:56:31,913 - sec_monitor - INFO - token percentage = 47%
2025-09-24 12:56:31,913 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 12:56:31,914 - sec_monitor - INFO - Timestamp: 2025-09-24 12:56:31
2025-09-24 12:56:49,272 - sec_monitor - INFO - API call successful
2025-09-24 12:57:19,303 - sec_monitor - INFO - ==================================================
2025-09-24 12:57:19,303 - sec_monitor - INFO - Processing middle chunk
2025-09-24 12:57:19,303 - sec_monitor - INFO - Timestamp: 2025-09-24 12:57:19
2025-09-24 12:57:19,609 - sec_monitor - INFO - token percentage = 49%
2025-09-24 12:57:19,609 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 12:57:19,610 - sec_monitor - INFO - Timestamp: 2025-09-24 12:57:19
2025-09-24 12:57:19,799 - sec_monitor - ERROR - API call failed - Attempt 1
2025-09-24 12:57:19,800 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 40.223229724s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
2025-09-24 12:57:19,800 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-09-24 13:00:19,889 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-09-24 13:00:19,889 - sec_monitor - INFO - Timestamp: 2025-09-24 13:00:19
2025-09-24 13:00:37,453 - sec_monitor - INFO - API call successful
2025-09-24 13:01:07,484 - sec_monitor - INFO - ==================================================
2025-09-24 13:01:07,484 - sec_monitor - INFO - Processing middle chunk
2025-09-24 13:01:07,484 - sec_monitor - INFO - Timestamp: 2025-09-24 13:01:07
2025-09-24 13:01:07,744 - sec_monitor - INFO - token percentage = 51%
2025-09-24 13:01:07,745 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 13:01:07,745 - sec_monitor - INFO - Timestamp: 2025-09-24 13:01:07
2025-09-24 13:01:07,868 - sec_monitor - ERROR - API call failed - Attempt 1
2025-09-24 13:01:07,868 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 52.157232728s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-09-24 13:01:07,868 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-09-24 13:04:07,887 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-09-24 13:04:07,887 - sec_monitor - INFO - Timestamp: 2025-09-24 13:04:07
2025-09-24 13:04:25,370 - sec_monitor - INFO - API call successful
2025-09-24 13:04:55,400 - sec_monitor - INFO - ==================================================
2025-09-24 13:04:55,400 - sec_monitor - INFO - Processing last chunk
2025-09-24 13:04:55,401 - sec_monitor - INFO - Timestamp: 2025-09-24 13:04:55
2025-09-24 13:04:55,586 - sec_monitor - INFO - token percentage = 30%
2025-09-24 13:04:55,586 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 13:04:55,586 - sec_monitor - INFO - Timestamp: 2025-09-24 13:04:55
2025-09-24 13:05:16,618 - sec_monitor - INFO - API call successful
2025-09-24 13:05:16,619 - sec_monitor - INFO - Making combine API call - Attempt 1/3
2025-09-24 13:05:16,619 - sec_monitor - INFO - Timestamp: 2025-09-24 13:05:16
2025-09-24 13:05:16,692 - sec_monitor - INFO - Combine API call failed - Attempt 1
2025-09-24 13:05:16,692 - sec_monitor - INFO - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 43.325147081s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 43
}
]
2025-09-24 13:05:16,693 - sec_monitor - INFO - Sleeping for 30 seconds before retry...
2025-09-24 13:05:46,723 - sec_monitor - INFO - Making combine API call - Attempt 2/3
2025-09-24 13:05:46,723 - sec_monitor - INFO - Timestamp: 2025-09-24 13:05:46
2025-09-24 13:05:48,287 - sec_monitor - INFO - Combine API call successful
2025-09-24 13:05:49,289 - sec_monitor - INFO - Processing filing 2/2: NRG
2025-09-24 13:06:25,389 - sec_monitor - INFO - ==================================================
2025-09-24 13:06:25,389 - sec_monitor - INFO - Processing first chunk
2025-09-24 13:06:25,389 - sec_monitor - INFO - Timestamp: 2025-09-24 13:06:25
2025-09-24 13:06:25,906 - sec_monitor - INFO - token percentage = 49%
2025-09-24 13:06:25,906 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 13:06:25,906 - sec_monitor - INFO - Timestamp: 2025-09-24 13:06:25
2025-09-24 13:06:26,051 - sec_monitor - ERROR - API call failed - Attempt 1
2025-09-24 13:06:26,051 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 33.972440628s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
]
2025-09-24 13:06:26,051 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-09-24 13:09:26,140 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-09-24 13:09:26,140 - sec_monitor - INFO - Timestamp: 2025-09-24 13:09:26
2025-09-24 13:09:26,291 - sec_monitor - ERROR - API call failed - Attempt 2
2025-09-24 13:09:26,291 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 33.733104791s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
]
2025-09-24 13:09:26,291 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-09-24 13:12:26,361 - sec_monitor - INFO - Making API call - Attempt 3/3
2025-09-24 13:12:26,361 - sec_monitor - INFO - Timestamp: 2025-09-24 13:12:26
2025-09-24 13:12:26,506 - sec_monitor - ERROR - API call failed - Attempt 3
2025-09-24 13:12:26,506 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 33.517343507s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
]
2025-09-24 13:12:26,506 - sec_monitor - ERROR - Failed to summarize chunk after 3 attempts: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 33.517343507s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
]
2025-09-24 13:12:56,524 - sec_monitor - INFO - ==================================================
2025-09-24 13:12:56,525 - sec_monitor - INFO - Processing last chunk
2025-09-24 13:12:56,525 - sec_monitor - INFO - Timestamp: 2025-09-24 13:12:56
2025-09-24 13:12:56,600 - sec_monitor - INFO - token percentage = 3%
2025-09-24 13:12:56,600 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-09-24 13:12:56,600 - sec_monitor - INFO - Timestamp: 2025-09-24 13:12:56
2025-09-24 13:13:18,066 - sec_monitor - INFO - API call successful
2025-09-24 13:13:19,068 - sec_monitor - INFO - Fetching supplementary data...
2025-09-24 13:13:19,476 - sec_monitor - INFO - filing_tickers type: <class 'list'>
2025-09-24 13:13:19,476 - sec_monitor - INFO - filing_data type: <class 'list'>
2025-09-24 13:13:19,476 - sec_monitor - INFO - Market open: False
2025-09-24 13:13:19,476 - sec_monitor - INFO - Number of filing times mapped: 2
2025-09-24 13:13:19,497 - sec_monitor - INFO - Last trading day: 2025-09-24
2025-09-24 13:13:19,497 - sec_monitor - INFO - Processing ticker: CTAS
2025-09-24 13:13:19,948 - sec_monitor - INFO - Number of bars for CTAS: 3
2025-09-24 13:13:19,949 - sec_monitor - INFO - Last bar close for CTAS: 200.6
2025-09-24 13:13:19,949 - sec_monitor - INFO - Outside market hours price for CTAS: 200.6
2025-09-24 13:13:19,949 - sec_monitor - INFO - Processing ticker: NRG
2025-09-24 13:13:19,976 - sec_monitor - INFO - Number of bars for NRG: 3
2025-09-24 13:13:19,976 - sec_monitor - INFO - Last bar close for NRG: 167.47
2025-09-24 13:13:19,976 - sec_monitor - INFO - Outside market hours price for NRG: 167.47
2025-09-24 13:13:20,919 - sec_monitor - INFO - Generating final output...
2025-09-24 13:13:20,920 - sec_monitor - INFO - Successfully merged 2 new filings with existing JSON
2025-09-24 13:13:20,920 - sec_monitor - INFO - Cumulative stats - Input words: 246268, Output words: 417
2025-09-24 13:13:20,920 - sec_monitor - INFO - Successfully saved/merged output to output/sec_filings.json
2025-09-24 13:13:20,920 - sec_monitor - INFO - Processing complete. Stats: {'input_words': 185991, 'output_words': 89, 'filings_processed': 2}
