2025-07-21 11:10:55,608 - sec_monitor - INFO - Starting SEC filing monitor 
2025-07-21 11:10:55,608 - sec_monitor - INFO - Loading S&P 500 data...
2025-07-21 11:10:55,608 - sec_monitor - INFO - Starting S&P 500 data initialization
2025-07-21 11:10:55,608 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-07-21 11:10:55,608 - sec_monitor - INFO - Successfully loaded 503 S&P 500 tickers
2025-07-21 11:10:55,608 - sec_monitor - INFO - Initializing components...
2025-07-21 11:10:55,609 - sec_monitor - INFO - Initializing components
2025-07-21 11:10:55,609 - sec_monitor - INFO - SEC fetcher initialized
2025-07-21 11:10:55,609 - sec_monitor - INFO - Filing analyzer initialized
2025-07-21 11:10:55,609 - sec_monitor - INFO - Alpaca clients initialized
2025-07-21 11:10:55,609 - sec_monitor - INFO - All components initialized successfully
2025-07-21 11:10:55,610 - sec_monitor - INFO - Found old JSON file, archiving
2025-07-21 11:10:55,610 - sec_monitor - INFO - Starting new filing collection for today
2025-07-21 11:10:55,610 - sec_monitor - INFO - Fetching SEC filings...
2025-07-21 11:10:56,430 - sec_monitor - INFO - Reached old filing, stopping. Found 8 total filings
2025-07-21 11:10:56,431 - sec_monitor - INFO - Found 6 new interesting filings
2025-07-21 11:10:56,431 - sec_monitor - INFO - Found 6 new filings to process
2025-07-21 11:10:56,431 - sec_monitor - INFO - Processing filing 1/6: GPN
2025-07-21 11:11:27,022 - sec_monitor - INFO - ==================================================
2025-07-21 11:11:27,022 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:11:27,022 - sec_monitor - INFO - Timestamp: 2025-07-21 11:11:27
2025-07-21 11:11:27,118 - sec_monitor - INFO - token percentage = 4%
2025-07-21 11:11:27,118 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:11:27,119 - sec_monitor - INFO - Timestamp: 2025-07-21 11:11:27
2025-07-21 11:11:41,945 - sec_monitor - INFO - API call successful
2025-07-21 11:11:42,946 - sec_monitor - INFO - Processing filing 2/6: MCO
2025-07-21 11:12:13,327 - sec_monitor - INFO - ==================================================
2025-07-21 11:12:13,327 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:12:13,327 - sec_monitor - INFO - Timestamp: 2025-07-21 11:12:13
2025-07-21 11:12:13,403 - sec_monitor - INFO - token percentage = 2%
2025-07-21 11:12:13,403 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:12:13,403 - sec_monitor - INFO - Timestamp: 2025-07-21 11:12:13
2025-07-21 11:12:16,203 - sec_monitor - INFO - API call successful
2025-07-21 11:12:17,205 - sec_monitor - INFO - Processing filing 3/6: ROP
2025-07-21 11:12:47,934 - sec_monitor - INFO - ==================================================
2025-07-21 11:12:47,934 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:12:47,934 - sec_monitor - INFO - Timestamp: 2025-07-21 11:12:47
2025-07-21 11:12:48,025 - sec_monitor - INFO - token percentage = 4%
2025-07-21 11:12:48,025 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:12:48,025 - sec_monitor - INFO - Timestamp: 2025-07-21 11:12:48
2025-07-21 11:12:59,143 - sec_monitor - INFO - API call successful
2025-07-21 11:13:00,145 - sec_monitor - INFO - Processing filing 4/6: VZ
2025-07-21 11:13:32,319 - sec_monitor - INFO - ==================================================
2025-07-21 11:13:32,319 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:13:32,319 - sec_monitor - INFO - Timestamp: 2025-07-21 11:13:32
2025-07-21 11:13:32,453 - sec_monitor - INFO - token percentage = 12%
2025-07-21 11:13:32,454 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:13:32,454 - sec_monitor - INFO - Timestamp: 2025-07-21 11:13:32
2025-07-21 11:13:41,532 - sec_monitor - INFO - API call successful
2025-07-21 11:13:42,533 - sec_monitor - INFO - Processing filing 5/6: DPZ
2025-07-21 11:14:33,935 - sec_monitor - INFO - ==================================================
2025-07-21 11:14:33,935 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:14:33,935 - sec_monitor - INFO - Timestamp: 2025-07-21 11:14:33
2025-07-21 11:14:34,745 - sec_monitor - INFO - token percentage = 42%
2025-07-21 11:14:34,745 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:14:34,745 - sec_monitor - INFO - Timestamp: 2025-07-21 11:14:34
2025-07-21 11:14:35,426 - sec_monitor - ERROR - API call failed - Attempt 1
2025-07-21 11:14:35,426 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
2025-07-21 11:14:35,426 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:17:35,524 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-07-21 11:17:35,524 - sec_monitor - INFO - Timestamp: 2025-07-21 11:17:35
2025-07-21 11:17:35,919 - sec_monitor - ERROR - API call failed - Attempt 2
2025-07-21 11:17:35,919 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 24
}
]
2025-07-21 11:17:35,920 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:20:35,999 - sec_monitor - INFO - Making API call - Attempt 3/3
2025-07-21 11:20:35,999 - sec_monitor - INFO - Timestamp: 2025-07-21 11:20:35
2025-07-21 11:20:36,527 - sec_monitor - ERROR - API call failed - Attempt 3
2025-07-21 11:20:36,527 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-07-21 11:20:36,527 - sec_monitor - ERROR - Failed to summarize chunk after 3 attempts: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-07-21 11:21:06,558 - sec_monitor - INFO - ==================================================
2025-07-21 11:21:06,558 - sec_monitor - INFO - Processing middle chunk
2025-07-21 11:21:06,558 - sec_monitor - INFO - Timestamp: 2025-07-21 11:21:06
2025-07-21 11:21:06,972 - sec_monitor - INFO - token percentage = 59%
2025-07-21 11:21:06,972 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:21:06,972 - sec_monitor - INFO - Timestamp: 2025-07-21 11:21:06
2025-07-21 11:21:07,364 - sec_monitor - ERROR - API call failed - Attempt 1
2025-07-21 11:21:07,364 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-07-21 11:21:07,364 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:24:07,454 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-07-21 11:24:07,454 - sec_monitor - INFO - Timestamp: 2025-07-21 11:24:07
2025-07-21 11:24:08,036 - sec_monitor - ERROR - API call failed - Attempt 2
2025-07-21 11:24:08,036 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-07-21 11:24:08,037 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:27:08,137 - sec_monitor - INFO - Making API call - Attempt 3/3
2025-07-21 11:27:08,137 - sec_monitor - INFO - Timestamp: 2025-07-21 11:27:08
2025-07-21 11:27:08,527 - sec_monitor - ERROR - API call failed - Attempt 3
2025-07-21 11:27:08,528 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 51
}
]
2025-07-21 11:27:08,528 - sec_monitor - ERROR - Failed to summarize chunk after 3 attempts: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 51
}
]
2025-07-21 11:27:38,558 - sec_monitor - INFO - ==================================================
2025-07-21 11:27:38,558 - sec_monitor - INFO - Processing middle chunk
2025-07-21 11:27:38,558 - sec_monitor - INFO - Timestamp: 2025-07-21 11:27:38
2025-07-21 11:27:38,993 - sec_monitor - INFO - token percentage = 49%
2025-07-21 11:27:38,993 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:27:38,993 - sec_monitor - INFO - Timestamp: 2025-07-21 11:27:38
2025-07-21 11:27:39,422 - sec_monitor - ERROR - API call failed - Attempt 1
2025-07-21 11:27:39,423 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 20
}
]
2025-07-21 11:27:39,423 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:30:39,512 - sec_monitor - INFO - Making API call - Attempt 2/3
2025-07-21 11:30:39,512 - sec_monitor - INFO - Timestamp: 2025-07-21 11:30:39
2025-07-21 11:30:39,919 - sec_monitor - ERROR - API call failed - Attempt 2
2025-07-21 11:30:39,919 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 20
}
]
2025-07-21 11:30:39,919 - sec_monitor - INFO - Quota exceeded. Sleeping for 180 seconds before retry...
2025-07-21 11:33:39,999 - sec_monitor - INFO - Making API call - Attempt 3/3
2025-07-21 11:33:39,999 - sec_monitor - INFO - Timestamp: 2025-07-21 11:33:39
2025-07-21 11:33:40,384 - sec_monitor - ERROR - API call failed - Attempt 3
2025-07-21 11:33:40,384 - sec_monitor - ERROR - Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-07-21 11:33:40,384 - sec_monitor - ERROR - Failed to summarize chunk after 3 attempts: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-07-21 11:34:10,399 - sec_monitor - INFO - ==================================================
2025-07-21 11:34:10,399 - sec_monitor - INFO - Processing last chunk
2025-07-21 11:34:10,399 - sec_monitor - INFO - Timestamp: 2025-07-21 11:34:10
2025-07-21 11:34:10,588 - sec_monitor - INFO - token percentage = 17%
2025-07-21 11:34:10,588 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:34:10,588 - sec_monitor - INFO - Timestamp: 2025-07-21 11:34:10
2025-07-21 11:34:39,458 - sec_monitor - INFO - API call successful
2025-07-21 11:34:40,459 - sec_monitor - INFO - Processing filing 6/6: DPZ
2025-07-21 11:35:11,727 - sec_monitor - INFO - ==================================================
2025-07-21 11:35:11,727 - sec_monitor - INFO - Processing first chunk
2025-07-21 11:35:11,727 - sec_monitor - INFO - Timestamp: 2025-07-21 11:35:11
2025-07-21 11:35:11,839 - sec_monitor - INFO - token percentage = 6%
2025-07-21 11:35:11,839 - sec_monitor - INFO - Making API call - Attempt 1/3
2025-07-21 11:35:11,839 - sec_monitor - INFO - Timestamp: 2025-07-21 11:35:11
2025-07-21 11:35:21,512 - sec_monitor - INFO - API call successful
2025-07-21 11:35:22,513 - sec_monitor - INFO - Fetching supplementary data...
2025-07-21 11:35:22,842 - sec_monitor - INFO - filing_tickers type: <class 'list'>
2025-07-21 11:35:22,842 - sec_monitor - INFO - filing_data type: <class 'list'>
2025-07-21 11:35:22,842 - sec_monitor - INFO - Market open: False
2025-07-21 11:35:22,842 - sec_monitor - INFO - Number of filing times mapped: 5
2025-07-21 11:35:22,913 - sec_monitor - INFO - Last trading day: 2025-07-21
2025-07-21 11:35:22,913 - sec_monitor - INFO - Processing ticker: GPN
2025-07-21 11:35:23,037 - sec_monitor - INFO - Number of bars for GPN: 3
2025-07-21 11:35:23,037 - sec_monitor - INFO - Last bar close for GPN: 81.94
2025-07-21 11:35:23,037 - sec_monitor - INFO - Outside market hours price for GPN: 81.94
2025-07-21 11:35:23,038 - sec_monitor - INFO - Processing ticker: MCO
2025-07-21 11:35:23,063 - sec_monitor - INFO - Number of bars for MCO: 3
2025-07-21 11:35:23,063 - sec_monitor - INFO - Last bar close for MCO: 500.0
2025-07-21 11:35:23,063 - sec_monitor - INFO - Outside market hours price for MCO: 500.0
2025-07-21 11:35:23,063 - sec_monitor - INFO - Processing ticker: ROP
2025-07-21 11:35:23,086 - sec_monitor - INFO - Number of bars for ROP: 3
2025-07-21 11:35:23,087 - sec_monitor - INFO - Last bar close for ROP: 544.31
2025-07-21 11:35:23,087 - sec_monitor - INFO - Outside market hours price for ROP: 544.31
2025-07-21 11:35:23,087 - sec_monitor - INFO - Processing ticker: VZ
2025-07-21 11:35:23,170 - sec_monitor - INFO - Number of bars for VZ: 3
2025-07-21 11:35:23,170 - sec_monitor - INFO - Last bar close for VZ: 40.795
2025-07-21 11:35:23,170 - sec_monitor - INFO - Outside market hours price for VZ: 40.795
2025-07-21 11:35:23,170 - sec_monitor - INFO - Processing ticker: DPZ
2025-07-21 11:35:23,200 - sec_monitor - INFO - Number of bars for DPZ: 3
2025-07-21 11:35:23,200 - sec_monitor - INFO - Last bar close for DPZ: 466.5
2025-07-21 11:35:23,200 - sec_monitor - INFO - Outside market hours price for DPZ: 466.5
2025-07-21 11:35:23,200 - sec_monitor - INFO - Processing ticker: DPZ
2025-07-21 11:35:23,230 - sec_monitor - INFO - Number of bars for DPZ: 3
2025-07-21 11:35:23,230 - sec_monitor - INFO - Last bar close for DPZ: 466.5
2025-07-21 11:35:23,230 - sec_monitor - INFO - Outside market hours price for DPZ: 466.5
2025-07-21 11:35:25,171 - sec_monitor - INFO - Generating final output...
2025-07-21 11:35:25,171 - sec_monitor - INFO - Successfully saved/merged output to output/sec_filings.json
2025-07-21 11:35:25,171 - sec_monitor - INFO - Processing complete. Stats: {'input_words': 189619, 'output_words': 486, 'filings_processed': 6}
